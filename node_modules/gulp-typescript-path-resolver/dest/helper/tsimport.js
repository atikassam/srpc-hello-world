"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const through = require("through2");
const replace_path_1 = require("./replace-path");
function tsPathResolver(importOptions, overwriteOptions) {
    overwriteOptions = overwriteOptions || {};
    importOptions.paths = importOptions.paths || {};
    overwriteOptions.paths = overwriteOptions.paths || {};
    Object.assign(importOptions.paths, overwriteOptions.paths);
    return through.obj(function (file, enc, cb) {
        let code = file.contents.toString('utf8');
        code = replace_path_1.replacePath(code, file.history.toString(), importOptions.outDir, importOptions.paths);
        file.contents = new Buffer(code);
        this.push(file);
        cb();
    });
}
exports.tsPathResolver = tsPathResolver;
