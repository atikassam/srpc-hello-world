"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const path = require("path");
const grammar_1 = require("../lib/grammar");
function generateGrammarInterface(grammar) {
    var _a, _b, _c;
    const props = [];
    const rules = grammar.matcher().grammar.rules;
    const name = grammar.matcher().grammar.name;
    for (let key in rules)
        props.push([key, (_b = (_a = rules[key]) === null || _a === void 0 ? void 0 : _a.body) === null || _b === void 0 ? void 0 : _b.factors]);
    let str = `import {Node} from "ohm-js";\n`;
    str += `\nexport interface ${name}Actions {`;
    for (let rule of props) {
        const args = Array(((_c = rule[1]) === null || _c === void 0 ? void 0 : _c.length) || 1)
            .fill(null)
            .concat([1])
            .map((value, index, array) => {
            return array.length - 1 > index
                ? ` t${index + 1}: Node`
                : ` ...t${index + 1}: Node[]`;
        }).join(',');
        str += `\n\t${rule[0]}?(${args}): any`;
    }
    str += "\n}";
    fs.writeFileSync(path.resolve(__dirname, `../lib/${name.toLowerCase()}.actions.type.ts`), str, { encoding: "utf8" });
}
generateGrammarInterface(grammar_1.grammar);
